---
title: API Reference

language_tabs: # must be one of https://github.com/rouge-ruby/rouge/wiki/List-of-supported-languages-and-lexers
  - python

toc_footers:
  - <a href='#'>Sign Up for a Developer Key</a>
  - <a href='https://github.com/slatedocs/slate'>Documentation Powered by Slate</a>

includes:
  - errors

search: true

code_clipboard: true

meta:
  - name: description
    content: Documentation for the Kittn API
---

# Introduction

Welcome to PolypharmSolutions Mobile API Documentations. API is intended for use in PolypharmSolutions mobile application.
The API is a work in progress.

This API documentation page was created with [Slate](https://github.com/slatedocs/slate).

# Authentication

API uses user keys to enable authentication. Routes are only accessible by users (disabled for development).
Provide authorization header for each API request.

`Authorization: kg94385kgdsfj`

<aside class="notice">
You must replace <code>kg94385kgdsfj</code> with your personal API key.
</aside>

## Register

Takes a user model, saves it to database and sends a registration confirmation mail.

### HTTP Request

```python
response = requests.post('http://127.0.0.1:8000/auth/register', json=user)
```


`POST http://mobile-api.polypharm.solutions/auth/register`

### Request Body

Takes in a nested JSON with user and userDetails Objects 

> Example user

```json
{
  "user": {
    "email": "email@email.com",
    "password": "password123"
  },
  "userDetails": {
    "firstName": "Ivan",
    "lastName": "Horvat",
    "birthYear": 1978,
    "sex": "male",
    "height": 193,
    "weight": 105,
    "condition": ["Alcoholism", "Headache", "Hypertension"],
    "userDiscovery": "Doctor"
  }
}
```

### Body

{
  "user": user,
  "userDetails": userDetails
}

fields | type         | description
------ |--------------| -----------
"user" | user         | See below for description
"userDetails" | userDetails  | See below for description


### user

fields | type | description
------ | ---- | -----------
email | string | /
password | string | /

### userDetails

fields | type            | description
------ |-----------------| -----------
firstName | string          |
lastName | string          | /                                   
birthYear | integer         | year as integer                               
sex | "male" OR "female" | /                                             
height | integer         | in cm                                         
weight | integer         | in kg                                         
condition | [string, string] | list of strings                               
userDiscovery |  string         | where did user hear about us, simple dropdown

<aside class="warning">
List of available conditions is generated by calling the API for getting the conditions
</aside>

### Response
Code | Meaning
---------- | -------
200| Success -- Registration successful
403| Error -- User already exists




## Login

Produces an authorization token, used for accessing routes.

### HTTP Request

```python
response = requests.post('http://127.0.0.1:8000/auth/login', json=login_data)
```


`POST http://mobile-api.polypharm.solutions/auth/login`

### Body

> Example body

````json
{
   "email": "email@email.com",
   "password": "password123"`
}
````

fields | type | description
------ | ---- | -----------
email | string | /
password | string | /

### Returns

> The POST returns response body

````json
{
   "Authorization": "kg94385kgdsfj",
}
````

{"Authorization":  "kg94385kgdsfj"}

fields | type            | description
------ |-----------------| -----------
Authorization | string          | An authorization token used for verifying users


### Response

Code | Meaning
---------- | -------
200| Success -- Login successful
404| Error -- User not found
404| Error -- Password incorrect

# User
User related operations

## Me
Returns user profile

<aside class="notice">
Requires an authorization header.
</aside>

### HTTP Request

>Set Authorization headers

````json
{
  "Authorization": "kg94385kgdsfj"
}
````

>Example code

```python
headers = {'Authorization': "kg94385kgdsfj"}
response = requests.get('http://127.0.0.1:8000/user/me', headers=header)
```

`GET http://mobile-api.polypharm.solutions/user/me`

### Returns

> The POST returns response body

````json
{
  "userModel": {
    "createdOn": "2023-04-16T15:07:40.010492",
    "email": "example@mail.com",
    "id": 3,
    "passwordHash": "$6$rounds=656"},
  "userDetails": {
    "weight": 85,
    "firstName": "Ivan",
    "condition": ["Alcholism", "Something else"],
    "birthYear": 1952,
    "lastName": "Horvat",
    "userDiscovery": "Facebook",
    "id": 1,
    "height": 175,
   "sex": "male"
  }
}
````

{
  "userModel": userModel,
  "userDetails": userDetails
}

fields | type        | description
------ |-------------| -----------
"userModel" | userModel   | See below for description
"userDetails" | userDetails | See below for description


### userModel

fields | type | description
------ | ---- | -----------
email | string | /
passwordHash | string | /
id | integer | /
created_on | datetime |

### userDetails

fields | type            | description
------ |-----------------| -----------
firstName | string          |
lastName | string          | /                                   
birthYear | integer         | year as integer                               
sex | "male" OR "female" | /                                             
height | integer         | in cm                                         
weight | integer         | in kg                                         
condition | [string, string] | list of strings                               
userDiscovery |  string         | where did user hear about us, simple dropdown

### Response
Code | Meaning
---------- | -------
200| Success 
403| Error -- Invalid access token

## Update Condition
Changes user condition. For example if user gets over a condition or has a new one.
<aside class="notice">
Requires an authorization header.
</aside>
<aside class="warning">
List of available conditions is generated by calling the API for getting the conditions
</aside>

### HTTP Request

>Example code

```python
headers = {'Authorization': "kg94385kgdsfj"}
body = {'conditions': ['Headache', 'Stomach pain']}
response = requests.get('http://127.0.0.1:8000/user/conditions', headers=header, body=body)
```

`GET http://mobile-api.polypharm.solutions/user/me`

## Request Body

>Example body

````json
{
  "conditions": ["Headache", "Stomach Pain"]
}
````


{
  "conditions": ["Headache", "Stomach pain"]
}

fields | type                     | description
------ |--------------------------| -----------
"conditions" | [string, string, string] | List of strings

### Response
Code | Meaning
---------- | -------
200| Success -- Conditions updated successfully
400| Error -- Conditions field is required
403| Error -- Invalid access token

## Add Therapy
Adds a medication to therapy model.
<aside class="notice">
Requires an authorization header.
</aside>

## Add Appointment
Adds an appointment to appointment model.
<aside class="notice">
Requires an authorization header.
</aside>

## Finish Therapy
Finishes a therapy as completed or discontinued or something like that.
<aside class="notice">
Requires an authorization header.
</aside>

## Finish Appointment
Finishes an appointment as completed or missed.
<aside class="notice">
Requires an authorization header.
</aside>

# Polypharm
Functionalities that are related to personalized medicine selection and/or evaluation.

## Find drug
Finds both products and ingredients from a query string

## Get ingredient
Returns an ingredient model from an ingredient ID

## Get product
Returns a product model from a product ID

## Analyze regimen
Analyzes current user's regimen
<aside class="notice">
Requires an authorization header.
</aside>

## Scan drug
Evaluates how an addition of a new drug would influence patient's current regimen
<aside class="notice">
Requires an authorization header.
</aside>
